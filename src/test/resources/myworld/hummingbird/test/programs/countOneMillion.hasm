.data 0x00 -1 f-0.34

.symbols
    # name, type (data or function), offset (-1 for foreign functions)
    # Note that data symbols logically have none of the pieces after the offset
    countToAMillion function $countToAMillion
        void
        # Parameters and registers specified the same way - a sequence of integers, in register file order.
        # Note that parameter spec is ignored by the VM - it is only useful
        # for reflection by embedders, though it is always required. Missing integers are assumed zero.
        parameters 0
        registers 3

.code
  countToAMillion:
    CONST r2, 1000000
    CONST r1, 1
    # TODO - typed registers, as shown below. This
    # allows using the same opcode name for logically identical
    # operations that are defined on multiple register types (const, add, etc)
    # Also TODO - add support for below opcodes and other important ones
    #CONV ri0, rf1
    #CONV rf0, ri1
    #BCONV rd0, ri1
    #STR rs0, ro0
  loop:
    ADD r0, r1
    IFLT r0, r2, $loop
    RETURN r0